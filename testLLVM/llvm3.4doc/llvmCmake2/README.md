code from http://releases.llvm.org/3.4/docs/CMake.html
